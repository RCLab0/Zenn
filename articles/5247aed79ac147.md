---
title: "2ã¤ä»¥ä¸Šã®GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ãŠã†"
emoji: "ğŸ‘€"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["github", "git", "ssh"]
published: false
---

SNS ã®é–‹ç™ºã®ãŸã‚ã«ãƒ–ãƒ­ã‚°ã‚’ç«‹ã¡ä¸Šã’ã¾ã—ãŸã€‚RCLab ã§ã™ã€‚
ä½¿ã£ãŸæŠ€è¡“ã‚„ã€å‚™å¿˜éŒ²ã®ãŸã‚ã«è¨˜äº‹ã‚’æ›¸ã„ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚

## GitHub ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ã„åˆ†ã‘ã‚‹
**å¿ƒæ©Ÿ**ä¸€è»¢å§‹ã‚ãŸã„ã“ã¨ã‚‚ã‚ã‚Š GitHub ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚‚**æ–°è¦**ã«ç™ºè¡Œã—ãŸæ¬¡ç¬¬ã§ã™ãŒã€git clone ã™ã‚‹ã¾ã§ã«å°‘ã—æ‰‹ã“ãšã£ãŸã®ã§ãã®å‚™å¿˜éŒ²ã«ãªã‚Šã¾ã™ã€‚

### æ–°ã—ã ssh key ã‚’ä½œæˆãƒ»ç™»éŒ²
GitHub ã§é–‹ç™ºã‚’ã—ãŸã“ã¨ã®ã‚ã‚‹çš†ã•ã‚“ãªã‚‰å¿…ãš GitHub ã«å…¬é–‹éµã‚’ç™»éŒ²ã—ã¾ã™ã‚ˆã­ï¼Ÿçš†ã•ã‚“ã¨åŒã˜ã‚ˆã†ã«ã€ç§ã‚‚å…¬é–‹éµã‚’ç½®ã“ã†ã¨ã—ã¾ã—ãŸãŒã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚
![](/images/multiple_git_account/key_is_already_in_use.png)

ã‚ã‹ã‚Šã‚„ã™ã„ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™ã­ã€‚æ—¢ã«ã“ã®å…¬é–‹éµã¯æ™®æ®µä½¿ã„ã—ã¦ã„ã‚‹ GitHub ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ç´ã¥ã‘ã‚‰ã‚Œã¦ãŠã‚Šä½¿ã‚ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ãªã®ã§æ”¹ã‚ã¦éµã‚’ä½œã‚Šç›´ã—ã¾ã—ã‚‡ã†ã€‚
```shell
$ ssh-keygen -t ed25519
Generating public/private ed25519 key pair.
Enter file in which to save the key (/Users/rclab/.ssh/id_ed25519): /Users/rclab/.ssh/id_ed25519_rclab
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
#########################################
# æ³¨æ„ã€‚ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æ„å›³çš„ã«ç·¨é›†ã™ã‚‹ã“ã¨ã€‚    
# Enter é€£æ‰“ã™ã‚‹ã¨æ—¢å­˜ã®éµãŒä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚
#########################################
Your identification has been saved in /Users/rclab/.ssh/id_ed25519_rclab
Your public key has been saved in /Users/rclab/.ssh/id_ed25519_rclab.pub
The key fingerprint is:
SHA256:I9Cn/7UGfHgSGiWmCn7qvBdMIqdgHsGuGSOCFB+XuFk rclab@rclab.local
The key's randomart image is:
+--[ED25519 256]--+
|.......          |
| +..oE  o .      |
|+ ..= .o.o       |
|O++o...o. .      |
|BO.= .o S+ o     |
|+.. =  o..= o    |
|   o .  .  =.    |
| .. .    . ...   |
| .+o      ...    |
+----[SHA256]-----+
```
ã•ã¦ã€ã“ã†ã—ã¦ã§ããŸéµã‚’ç™»éŒ²ã—ã¾ã™ã€‚
![](/images/multiple_git_account/registered_key.png)
ã§ãã¾ã—ãŸ ğŸ‰

### æ—©é€Ÿ `git clone` ã™ã‚‹ã‚‚...
éµãŒç™»éŒ²ã§ããŸã®ã§ git clone ã—ã¾ã—ã‚‡ã†ï¼
```shell
$ git clone git@github.com:RCLab0/Zenn.git
Cloning into 'Zenn'...
ERROR: Repository not found.
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
```
ã‚€ã‚€ã€'make sure you have the correct access rights' ã¨è¨€ã‚ã‚Œã¦ã—ã¾ã„ã¾ã—ãŸã€‚ã©ã†ã‚„ã‚‰æ¨©é™ãŒæ­£ã—ããªã„ã‚ˆã†ã§ã™ã€‚ã¡ã‚ƒã‚“ã¨ ssh ã§ãã¦ã‚‹ã®ã§ã—ã‚‡ã†ã‹ï¼Ÿ
```shell
$ ssh git@github.com
PTY allocation request failed on channel 0
Hi UserName! You've successfully authenticated, but GitHub does not provide shell access.
Connection to github.com closed.
```
å½“ãŸã‚Šå‰ã§ã™ã­ã€‚ç‰¹ã«ä½¿ã†éµã‚’æŒ‡å®šã—ã¦ã„ãªã„ã®ã§ã€æ™®æ®µä½¿ã„ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚
ã§ã¯ã€éµã‚’æŒ‡å®šã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
```shell
$ git@github.com -i ~/.ssh/id_ed25519_rclab
PTY allocation request failed on channel 0
Hi RCLab0! You've successfully authenticated, but GitHub does not provide shell access.
Connection to github.com closed.
```
ãŠã€ã¡ã‚ƒã‚“ã¨ LCLab0 ã«ãªã£ã¦ã‚‹ã˜ã‚ƒãªã„ï¼ã¨ã„ã†ã“ã¨ã¯ã€Œéµã‚’æŒ‡å®šã—ã¦ cloneã€ã™ã‚Œã° `git clone` ã‚‚é€šã‚‹ã®ã§ã¯...ï¼Ÿ

### `~/.ssh/config` ã‚’ç·¨é›†ã—ã¦ `git clone` ã™ã‚‹
ãƒ‘ãƒƒã¨æ€ã„ã¤ã„ãŸã®ãŒã€`~/.ssh/config` ã‚’ç·¨é›†ã—ã¦ã€Host ã‚’å¼„ã£ã¦ã—ã¾ã†ã¨ã„ã†ã“ã¨ã§ã—ãŸã€‚
```shell:~/.ssh/config
$ vi config
Host rclab-github.com
  User git
  Hostname github.com
  IdentityFile ~/.ssh/id_ed25519_rclab
  IdentitiesOnly yes
```
ã“ã®ã‚ˆã†ã«ã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¦ã‚„ã‚‹ã¨
```shell
$ git clone git@rclab-github.com:RCLab0/Zenn.git
Cloning into 'Zenn'...
warning: You appear to have cloned an empty repository.
```
ã§ãã¾ã—ãŸï¼ ğŸ‰

### ãã®ä»–ã€ git config ã‚’ç·¨é›†ã™ã‚‹æ–¹æ³•
ã©ã†ã‚„ã‚‰ã€ git ãŒç”¨ã„ã‚‹ ssh ã‚³ãƒãƒ³ãƒ‰ã‚’ config ã§æŒ‡å®šã§ãã‚‹ã‚ˆã†ã§ã™ã€‚
```shell
$ git config core.sshCommand "ssh -i ~/.ssh/id_ed25519_rclab -F /dev/null"
```
ã“ã®ã‚ˆã†ã«ã™ã‚‹ã¨
```shell
$ git clone git@github.com:RCLab0/Zenn.git
```
ã§ã‚‚ clone ã§ãã‚‹ã‚ˆã†ã§ã™ã€‚ãŸã ã€ global ã®è¨­å®šã‚’å¼„ã‚ŠãŸãã¯ãªã„ã®ã§ã€
```shell
$ git -c core.sshCommand="ssh -i ~/.ssh/id_ed25519_rclab -F /dev/null" clone git@github.com:RCLab0/Zenn.git
```
ã®ã‚ˆã†ã«ã™ã‚‹ã®ãŒã„ã„ã¨æ€ã„ã¾ã™ã€‚ã‚³ãƒãƒ³ãƒ‰é•·ã„ã®ã§ã€æ›¸ãæ›ãˆã®æ‰‹é–“ã¯ã‹ã‹ã‚Šã¾ã™ãŒã€ ssh config å¼„ã‚‹æ–¹ãŒç¾çŠ¶å¾—ç­–ã‹ãªã€ã£ã¦æ€ã£ã¦ã¾ã™ã€‚